<template>
  <ui-page>
    <ui-nav-bar slot="nav-bar"  class="nav_bar">
      <ui-row height="46">
        <ui-col vertical-align="middle" align="center" width="50">
          <ui-icon name="ring" size="24" color="#fff"></ui-icon>
        </ui-col>
        <ui-col vertical-align="middle" align="center">
          <ui-view class="nav_title">商品列表</ui-view>
        </ui-col>
        <ui-col vertical-align="middle" align="center" width="50">
          <ui-icon name="setting" size="24" color="#fff"></ui-icon>
        </ui-col>
      </ui-row>
    </ui-nav-bar>
    <ui-view class="container">
      <ui-row>
        <ui-col>
          <ui-row class="search_box" border-bottom height="46">
            <ui-col vertical-align="middle" align="center">
              <ui-view class="search_content">  
                <ui-row height="30">
                  <ui-col width="300" vertical-align="middle">
                    <ui-form action="/search">
                      <ui-input type="search" name="search" placeholder="搜索"></ui-input>
                    </ui-form>
                  </ui-col>
                </ui-row>
              </ui-view>
            </ui-col>
          </ui-row>
        </ui-col>
      </ui-row>
      <ui-row>

        <ui-col border-right span="3">
          <ui-v-tabs height="{{height}}"
          tab-style="{{tabStyle}}"
          active-tab-style="{{activeTabStyle}}" height="{{ height }}" index="{{ current }}" bindchange="handleChange($event, 'current')">
            <ui-v-tab ui:for="{{ tabItems }}">
              {{ item.name }}
            </ui-v-tab>
          </ui-v-tabs>
        </ui-col>
        
        <ui-col>
          <ui-list-view data="{{ tabContentData }}"> 
            <template scope="props">
              <ui-list-view-item bindtap="navHandle">
                <ui-text>{{props.item.name}}</ui-text>
              </ui-list-view-item>
            </template>
          </ui-list-view>
        </ui-col>
      </ui-row>
    </ui-view>
  </ui-page>
</template>

<script>
export default {
  config: {
    navigationStyle: 'custom',
    navigationBarTextStyle: 'white'
  },
  data() {
    return {
      productList: [
        [
          {
            name: '百树得',
            helpCode: 'bsd'
          },
          {
            name: '氧乐果',
            helpCode: 'ylg'
          },
          {
            name: '敌杀死',
            helpCode: 'dss'
          },
          {
            name: '敌敌畏',
            helpCode: 'ddw'
          },
          {
            name: '毒丝本',
            helpCode: 'dsb'
          },
          {
            name: '巴丹',
            helpCode: 'bd'
          }
        ],
        [
          {
            name: '施保克'
          },
          {
            name: '富士一号'
          },
          {
            name: '宝利安'
          },
          {
            name: '菌毒清'
          }
        ],
        [
          {
            name: '克无踪'
          },
          {
            name: '农达'
          }
        ],
        [
          {
            name: '健壮素'
          },
          {
            name: '稳生'
          }
        ],
        [
          {
            name: '硼酸'
          },
          {
            name: '硫酸锌'
          }
        ]
      ],
      current: 0,
      tabItems: [
        { name: '杀虫剂' },
        { name: '杀菌剂' },
        { name: '除草剂' },
        { name: '调节剂' },
        { name: '微肥' }
      ],
      height: ui.DEFAULT_CONTENT_HEIGHT,
      tabStyle: {
        color: '#333',
        'width:': '80px'
      },
      activeTabStyle: {
        color: '#ff2a00',
        'border-right': '1px solid #ff2a00'
      },
      tabContents: [],
      tabContentData: []
    }
  },
  mounted() {
    this.tabContentData = this.productList[0]
  },
  methods: {
    handleChange(index, key) {
      console.log(index)
      this[key] = index
      this.tabContentData = this.productList[index]
    },
    handleContentChange(index, key) {
      this[key] = index
    },
    navigateBack() {
      ui.navigateBack()
    },
    navHandle() {
      ui.navigateTo({
        url: '/pages/detail'
      })
    }
  }
}
</script>

<style lang="less">
.container {
  display: flex;
  flex-direction: column;
}

.imgbox {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  overflow: hidden;
  margin: 0 auto;
  // .mix-1px(1, 1, 1, 1, #ccc);
  border: 1px solid #ccc;
  border-style: rgba(231, 231, 231, 0.6);
  .ui-image {
    width: 100%;
  }
}

.small-title {
  font-size: 24rpx;
  text-align: center;
  margin-top: 20rpx;
}
.goods-box {
  display: flex;
  flex-wrap: wrap;
  align-content: flex-start;
  .goods-list {
    flex: 0 0 33.33%;
    margin-top: 40rpx;
  }
}

.ui-list-view {
  padding: 0 2px;

  .ui-list-view-item {
    height: 50px;
    line-height: 50px;
    text-align: center;
  }

  .ui-list-view-item:nth-child(even) {
    background: #f4f4f4;
  }
}

.nav_bar {
  background: @theme-color;
  .nav_title {
    color: #fff;
  }
}
</style>